{"version":3,"sources":["webpack:///src/app/home/donate/new-donation/new-donation-routing.module.ts","webpack:///src/app/home/donate/new-donation/new-donation.page.html","webpack:///src/app/home/donate/new-donation/new-donation.page.ts","webpack:///src/app/home/donate/new-donation/new-donation.module.ts","webpack:///src/app/home/donate/new-donation/new-donation.page.scss"],"names":["routes","path","component","NewDonationPageRoutingModule","imports","forChild","exports","PetFormData","NewDonationPage","alertController","router","petsDataService","userDataService","newPet","loadData","user","get","event","files","target","console","log","images","userId","id","userName","name","create","subscribe","presentAlertSuccess","length","place","age","type","description","header","buttons","text","handler","navigate","alert","present","message","selector","template","NewDonationPageModule","declarations"],"mappings":"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","file":"new-donation-new-donation-module-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { NewDonationPage } from './new-donation.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: NewDonationPage,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class NewDonationPageRoutingModule {}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"home/tabs/donate\\\"></ion-back-button>\\r\\n    </ion-buttons>    \\r\\n    <ion-title>Nova Doação</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n<form (ngSubmit)=\\\"postForm()\\\">\\r\\n  <ion-col>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Nome:</ion-label>\\r\\n      <ion-input type=\\\"text\\\" name=\\\"name\\\"[(ngModel)]=\\\"newPet.name\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Idade (meses):</ion-label>\\r\\n      <ion-input type=\\\"number\\\" name=\\\"age\\\"[(ngModel)]=\\\"newPet.age\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Cidade:</ion-label>\\r\\n      <ion-input type=\\\"text\\\" name=\\\"place\\\"[(ngModel)]=\\\"newPet.place\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Espécie:</ion-label>\\r\\n      <ion-select name=\\\"type\\\" [(ngModel)]=\\\"newPet.type\\\">\\r\\n        <ion-select-option value=\\\"cat\\\">Gato</ion-select-option>\\r\\n        <ion-select-option value=\\\"dog\\\">Cachorro</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Descrição:</ion-label>        \\r\\n      <ion-textarea name=\\\"description\\\" [(ngModel)]=\\\"newPet.description\\\" rows=\\\"5\\\" placeholder=\\\"Descreva as principais características do animal\\\"></ion-textarea> \\r\\n   </ion-item>\\r\\n   <ion-item>\\r\\n    <ion-label position=\\\"stacked\\\">Foto do Animal:</ion-label>\\r\\n    <ion-input type=\\\"file\\\" name=\\\"images\\\" (change)=\\\"uploadFiles($event)\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  </ion-col>\\r\\n  <ion-button disabled={{isFormComplete()}} type=\\\"submit\\\" >Confirmar</ion-button>\\r\\n</form>\\r\\n</ion-content>\\r\\n\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\nimport { User } from '../../../interfaces/User';\r\nimport { PetsDataServiceNew } from '../../../services/PetsDataServiceNew';\r\nimport { UserDataService } from '../../../services/UserDataService';\r\n\r\nclass PetFormData {\r\n  name: string;\r\n  place: string;\r\n  images: FileList;\r\n  userId: number;\r\n  userName: string;\r\n  age: number;\r\n  type: string;\r\n  description: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-new-donation',\r\n  templateUrl: './new-donation.page.html',\r\n  styleUrls: ['./new-donation.page.scss'],\r\n})\r\nexport class NewDonationPage implements OnInit {\r\n  public newPet = new PetFormData();\r\n  private user: User;\r\n\r\n  constructor(\r\n    private alertController: AlertController,\r\n    private router: Router,\r\n    private petsDataService: PetsDataServiceNew,\r\n    private userDataService: UserDataService,\r\n  ) {\r\n    this.loadData();\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n\r\n  loadData(): void {\r\n    this.user = this.userDataService.get();\r\n  }\r\n\r\n  uploadFiles(event: any): void {\r\n    const files = (event.target as HTMLInputElement).files;\r\n    console.log('uploadFiles -> files = ', files);\r\n\r\n    this.newPet.images = files;\r\n  }\r\n\r\n  postForm(): void {\r\n    this.newPet.userId = this.user.id;\r\n    this.newPet.userName = this.user.name;\r\n\r\n    this.petsDataService.create(this.newPet).subscribe(() => {\r\n      this.newPet = new PetFormData();\r\n      this.presentAlertSuccess();\r\n    });\r\n  }\r\n\r\n  isFormComplete(): boolean {\r\n    return !(\r\n      this.newPet?.name?.length > 0 &&\r\n      this.newPet?.place?.length > 0 &&\r\n      this.newPet?.images &&\r\n      this.newPet?.age &&\r\n      this.newPet?.type?.length > 0 &&\r\n      this.newPet?.description?.length > 0\r\n    );\r\n  }\r\n\r\n  async presentAlertSuccess(): Promise<any> {\r\n    const alert = await this.alertController.create({\r\n      header: 'Doação criada com sucesso!',\r\n      buttons: [\r\n        {\r\n          text: 'Entendi',\r\n          handler: () => {\r\n            console.log('clicou, volta pra lista de doações');\r\n            this.router.navigate(['/home/tabs/donate/']);\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async presentAlertError(): Promise<any> {\r\n    const alert = await this.alertController.create({\r\n      header: 'Houve um erro na criação da doação',\r\n      message: 'Por favor tente novamente mais tarde',\r\n      buttons: [\r\n        {\r\n          text: 'Entendi',\r\n          handler: () => {\r\n            this.router.navigate(['/home/tabs/donate/']);\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { NewDonationPageRoutingModule } from './new-donation-routing.module';\r\nimport { NewDonationPage } from './new-donation.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    NewDonationPageRoutingModule,\r\n  ],\r\n  declarations: [NewDonationPage],\r\n})\r\nexport class NewDonationPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvZG9uYXRlL25ldy1kb25hdGlvbi9uZXctZG9uYXRpb24ucGFnZS5zY3NzIn0= */\";"]}