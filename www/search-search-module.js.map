{"version":3,"sources":["./src/app/home/search/search.module.ts","./src/app/home/search/search.page.ts","./src/app/home/search/search.page.html","./src/app/home/search/search.page.scss","./src/app/home/search/search-routing.module.ts"],"names":[],"mappings":"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","file":"search-search-module.js","sourcesContent":["import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PhotoCardComponent } from '../../components/photo-card/photo-card.component';\r\n\r\nimport { SearchPageRoutingModule } from './search-routing.module';\r\nimport { SearchPage } from './search.page';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, IonicModule, SearchPageRoutingModule],\r\n  declarations: [SearchPage, PhotoCardComponent],\r\n})\r\nexport class SearchPageModule {}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\nimport { Pet } from '../../interfaces/Pet';\nimport { PetsDataServiceNew } from '../../services/PetsDataServiceNew';\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.page.html',\n  styleUrls: ['./search.page.scss'],\n})\nexport class SearchPage implements OnInit, OnDestroy {\n  private subject = new Subject();\n  public isLoading = false;\n  public petsData: Readonly<Pet[]>;\n  public filteredPetsData: Readonly<Pet[]>;\n  public selectedSegment = 'all';\n  public result: Readonly<Pet[]>;\n\n  constructor(private petsDataService: PetsDataServiceNew) {}\n\n  ngOnInit(): void {\n    this.petsDataService\n      .get()\n      .pipe(takeUntil(this.subject))\n      .subscribe(data => {\n        this.petsData = data;\n      });\n\n    this.applySegmentFilter(this.selectedSegment);\n  }\n\n  ngOnDestroy(): void {\n    this.subject.next();\n    this.subject.complete();\n  }\n\n  //Preciso desse? Ele acaba dando um novo fetch toda vez que entra nessa tela\n  ionViewWillEnter(): void {\n    this.isLoading = true;\n    this.petsDataService.fetch().subscribe(() => {\n      this.isLoading = false;\n    });\n  }\n\n  applySegmentFilter(type: string): void {\n    console.log('applySegmentFilter -> type = ', type);\n\n    if (type === 'all') {\n      this.filteredPetsData = this.petsData;\n    } else {\n      this.filteredPetsData = this.petsData.filter(i => i.type === type);\n      console.log('filtrados = ', this.filteredPetsData);\n    }\n    this.result = this.filteredPetsData;\n  }\n\n  filterArray(ev: any): Readonly<Pet[]> {\n    console.log('filterArray -> ev.target.value = ', ev.target.value);\n    this.result = this.filteredPetsData;\n    const val = ev.target.value;\n    if (val && val.trim() !== '') {\n      this.result = this.result.filter(item => {\n        return (\n          item.name.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\n          item.place.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\n          item.userName.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\n          item.description.toLowerCase().indexOf(val.toLowerCase()) > -1\n        );\n      });\n    } else {\n      return this.filteredPetsData;\n    }\n  }\n}\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-segment [(ngModel)]=\\\"selectedSegment\\\" (ionChange)=\\\"applySegmentFilter($event.detail.value)\\\">\\r\\n      <ion-segment-button value=\\\"all\\\">\\r\\n        <ion-label>Todos</ion-label>\\r\\n      </ion-segment-button>\\r\\n      <ion-segment-button value=\\\"dog\\\">\\r\\n        <ion-label>Cachorros</ion-label>\\r\\n      </ion-segment-button>\\r\\n      <ion-segment-button value=\\\"cat\\\">\\r\\n        <ion-label>Gatos</ion-label>\\r\\n      </ion-segment-button>\\r\\n    </ion-segment>\\r\\n  </ion-toolbar>\\r\\n  <ion-toolbar>\\r\\n    <ion-searchbar (ionInput)=\\\"filterArray($event)\\\" placeholder=\\\"Buscar animal\\\"></ion-searchbar>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-text color=\\\"primary\\\">\\r\\n    <h1 class=\\\"ion-text-center\\\">\\r\\n      {{result.length}} Animais Encontrados\\r\\n    </h1>\\r\\n  </ion-text>\\r\\n      <app-photo-card [item]=\\\"i\\\" *ngFor=\\\"let i of result\\\"> </app-photo-card>\\r\\n</ion-content>\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvc2VhcmNoL3NlYXJjaC5wYWdlLnNjc3MifQ== */\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { SearchPage } from './search.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SearchPage,\n  },\n  {\n    path: 'detail-donation',\n    loadChildren: () =>\n      import('./detail-donation/detail-donation.module').then(\n        m => m.DetailDonationPageModule,\n      ),\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class SearchPageRoutingModule {}\n"],"sourceRoot":"webpack:///"}