{"version":3,"sources":["webpack:///src/app/home/search/search.module.ts","webpack:///src/app/home/search/search.page.ts","webpack:///src/app/home/search/search.page.html","webpack:///src/app/home/search/search.page.scss","webpack:///src/app/home/search/search-routing.module.ts"],"names":["SearchPageModule","imports","declarations","SearchPage","petsDataService","subject","isLoading","selectedSegment","get","pipe","subscribe","data","petsData","applySegmentFilter","next","complete","fetch","type","console","log","filteredPetsData","filter","i","result","ev","target","value","val","trim","item","name","toLowerCase","indexOf","place","userName","description","selector","template","routes","path","component","loadChildren","then","m","DetailDonationPageModule","SearchPageRoutingModule","forChild","exports"],"mappings":"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","file":"search-search-module-es5.js","sourcesContent":["import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PhotoCardComponent } from '../../components/photo-card/photo-card.component';\r\n\r\nimport { SearchPageRoutingModule } from './search-routing.module';\r\nimport { SearchPage } from './search.page';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, IonicModule, SearchPageRoutingModule],\r\n  declarations: [SearchPage, PhotoCardComponent],\r\n})\r\nexport class SearchPageModule {}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nimport { Pet } from '../../interfaces/Pet';\r\nimport { PetsDataServiceNew } from '../../services/PetsDataServiceNew';\r\n\r\n@Component({\r\n  selector: 'app-search',\r\n  templateUrl: './search.page.html',\r\n  styleUrls: ['./search.page.scss'],\r\n})\r\nexport class SearchPage implements OnInit, OnDestroy {\r\n  private subject = new Subject();\r\n  public isLoading = false;\r\n  public petsData: Readonly<Pet[]>;\r\n  public filteredPetsData: Readonly<Pet[]>;\r\n  public selectedSegment = 'all';\r\n  public result: Readonly<Pet[]>;\r\n\r\n  constructor(private petsDataService: PetsDataServiceNew) {}\r\n\r\n  ngOnInit(): void {\r\n    this.petsDataService\r\n      .get()\r\n      .pipe(takeUntil(this.subject))\r\n      .subscribe(data => {\r\n        this.petsData = data;\r\n      });\r\n\r\n    this.applySegmentFilter(this.selectedSegment);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subject.next();\r\n    this.subject.complete();\r\n  }\r\n\r\n  //Preciso desse? Ele acaba dando um novo fetch toda vez que entra nessa tela\r\n  ionViewWillEnter(): void {\r\n    this.isLoading = true;\r\n    this.petsDataService.fetch().subscribe(() => {\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  applySegmentFilter(type: string): void {\r\n    console.log('applySegmentFilter -> type = ', type);\r\n\r\n    if (type === 'all') {\r\n      this.filteredPetsData = this.petsData;\r\n    } else {\r\n      this.filteredPetsData = this.petsData.filter(i => i.type === type);\r\n      console.log('filtrados = ', this.filteredPetsData);\r\n    }\r\n    this.result = this.filteredPetsData;\r\n  }\r\n\r\n  filterArray(ev: any): Readonly<Pet[]> {\r\n    console.log('filterArray -> ev.target.value = ', ev.target.value);\r\n    this.result = this.filteredPetsData;\r\n    const val = ev.target.value;\r\n    if (val && val.trim() !== '') {\r\n      this.result = this.result.filter(item => {\r\n        return (\r\n          item.name.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\r\n          item.place.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\r\n          item.userName.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\r\n          item.description.toLowerCase().indexOf(val.toLowerCase()) > -1\r\n        );\r\n      });\r\n    } else {\r\n      return this.filteredPetsData;\r\n    }\r\n  }\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-segment [(ngModel)]=\\\"selectedSegment\\\" (ionChange)=\\\"applySegmentFilter($event.detail.value)\\\">\\r\\n      <ion-segment-button value=\\\"all\\\">\\r\\n        <ion-label>Todos</ion-label>\\r\\n      </ion-segment-button>\\r\\n      <ion-segment-button value=\\\"dog\\\">\\r\\n        <ion-label>Cachorros</ion-label>\\r\\n      </ion-segment-button>\\r\\n      <ion-segment-button value=\\\"cat\\\">\\r\\n        <ion-label>Gatos</ion-label>\\r\\n      </ion-segment-button>\\r\\n    </ion-segment>\\r\\n  </ion-toolbar>\\r\\n  <ion-toolbar>\\r\\n    <ion-searchbar (ionInput)=\\\"filterArray($event)\\\" placeholder=\\\"Buscar animal\\\"></ion-searchbar>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-text color=\\\"primary\\\">\\r\\n    <h1 class=\\\"ion-text-center\\\">\\r\\n      {{result.length}} Animais Encontrados\\r\\n    </h1>\\r\\n  </ion-text>\\r\\n      <app-photo-card [item]=\\\"i\\\" *ngFor=\\\"let i of result\\\"> </app-photo-card>\\r\\n</ion-content>\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvc2VhcmNoL3NlYXJjaC5wYWdlLnNjc3MifQ== */\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SearchPage } from './search.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SearchPage,\r\n  },\r\n  {\r\n    path: 'detail-donation',\r\n    loadChildren: () =>\r\n      import('./detail-donation/detail-donation.module').then(\r\n        m => m.DetailDonationPageModule,\r\n      ),\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SearchPageRoutingModule {}\r\n"]}