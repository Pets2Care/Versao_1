{"version":3,"sources":["./src/app/auth/auth-routing.module.ts","./src/app/auth/auth.page.html","./src/app/users.js","./src/app/services/UserDataService.ts","./src/app/auth/auth.module.ts","./src/app/auth/auth.page.scss","./src/app/auth/auth.page.ts","./src/app/services/UsersDataService.ts"],"names":["users","id","name","email","password"],"mappings":"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","file":"auth-auth-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { AuthPage } from './auth.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: AuthPage,\r\n  },\r  {\n    path: 'new-user',\n    loadChildren: () => import('./new-user/new-user.module').then( m => m.NewUserPageModule)\n  },\n\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class AuthPageRoutingModule {}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>Login</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-item>\\r\\n    <ion-label>E-mail</ion-label>\\r\\n    <ion-input clearInput type=\\\"email\\\" [(ngModel)]=\\\"userName\\\"></ion-input>\\r\\n  </ion-item>\\r\\n\\r\\n  <ion-item>\\r\\n    <ion-label>Senha</ion-label>\\r\\n    <ion-input clearInput type=\\\"password\\\" [(ngModel)]=\\\"password\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  <br>\\r\\n\\r\\n  <div style=\\\"text-align: center\\\">\\r\\n    <ion-button (click)=\\\"verifyUser($event)\\\" >Login</ion-button>\\r\\n  </div>\\r\\n  <br>\\r\\n\\r\\n  <br>\\r\\n  <div style=\\\"text-align: center\\\">\\r\\n    <ion-button fill=\\\"clear\\\" (click)=\\\"createUser()\\\">\\r\\n      <span>\\r\\n        <ion-icon name=\\\"man-outline\\\"></ion-icon><br>\\r\\n      <small> Ainda não tem uma conta? Registre-se Aqui!</small> \\r\\n      </span> \\r\\n    </ion-button>\\r\\n  </div>\\r\\n</ion-content>\";","const users = [\n  {\n    id: 0,\n    name: 'José Assis',\n    email: 'jose.assis@email.com',\n    password: '1234',\n  },\n  {\n    id: 1,\n    name: 'Maria do Carmo',\n    email: 'maria.carmo@email.com',\n    password: '1234',\n  },\n  {\n    id: 2,\n    name: 'Pedro Oliveira',\n    email: 'pedro.oliveira@email.com',\n    password: '1234',\n  },\n  {\n    id: 3,\n    name: 'Lucas Costa',\n    email: 'lucas.costa@email.com',\n    password: '1234',\n  },\n];\n\nexport default users;\n","import { Injectable } from '@angular/core';\r\nimport { Storage } from '@ionic/storage';\r\n\r\nimport { User } from '../interfaces/User';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class UserDataService {\r\n  private data: User;\r\n\r\n  constructor(private storage: Storage) {\r\n    this.loadData();\r\n  }\r\n\r\n  private async loadData() {\r\n    console.log('UserDataService -> loadData()');\r\n    const storageData = (await this.storage.get('user')) as User;\r\n    if (storageData) {\r\n      this.data = storageData;\r\n    }\r\n  }\r\n\r\n  private storeData() {\r\n    this.storage.set('user', this.data);\r\n  }\r\n\r\n  public get(): User {\r\n    return this.data;\r\n  }\r\n\r\n  public set(newData: User): void {\r\n    this.data = newData;\r\n    this.storeData();\r\n  }\r\n\r\n  public clear(): void {\r\n    console.log('UserDataService -> clear()');\r\n    this.storage.remove('user');\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { AuthPageRoutingModule } from './auth-routing.module';\r\nimport { AuthPage } from './auth.page';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, IonicModule, AuthPageRoutingModule],\r\n  declarations: [AuthPage],\r\n})\r\nexport class AuthPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2F1dGgvYXV0aC5wYWdlLnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\nimport { User } from '../interfaces/User';\r\nimport { UserDataService } from '../services/UserDataService';\r\nimport { UsersDataService } from '../services/UsersDataService';\r\n\r\n@Component({\r\n  selector: 'app-auth',\r\n  templateUrl: './auth.page.html',\r\n  styleUrls: ['./auth.page.scss'],\r\n})\r\nexport class AuthPage implements OnInit {\r\n  users: Readonly<User[]>;\r\n  userName: '';\r\n  password: any;\r\n\r\n  constructor(\r\n    private usersDataService: UsersDataService,\r\n    private userDataService: UserDataService,\r\n    private alertController: AlertController,\r\n    private router: Router,\r\n  ) {\r\n    this.loadData();\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  loadData() {\r\n    this.users = this.usersDataService.getAll();\r\n  }\r\n\r\n  verifyUser(ev: any){\r\n    const hasUser = this.users.find(e => e.email === this.userName);\r\n    if (hasUser){\r\n      if (hasUser.password === this.password){\r\n        this.loginUser(hasUser.id);\r\n      }\r\n    }\r\n    else{\r\n      this.presentAlertError();\r\n    }\r\n  }\r\n\r\n  async presentAlertError() {\r\n    const alert = await this.alertController.create({\r\n      header: 'Atenção!',\r\n      message: 'Usuário e/ou Senha incorretos!',\r\n      buttons: ['OK']\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  loginUser(userId: number): void {\r\n    const user = this.usersDataService.getById(userId);\r\n    this.userDataService.set(user);\r\n    this.router.navigate(['/home']);\r\n  }\r\n\r\n  createUser(): void{\r\n    this.router.navigate(['/auth/new-user']);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Storage } from '@ionic/storage';\r\n\r\nimport { User } from '../interfaces/User';\r\nimport users from '../users.js';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class UsersDataService {\r\n  private data: User[] = [];\r\n\r\n  constructor(private storage: Storage) {\r\n    this.loadData();\r\n  }\r\n\r\n  private async loadData() {\r\n    const storageData = (await this.storage.get('users')) as User[];\r\n    if (storageData) {\r\n      this.data.push(...storageData);\r\n    } else {\r\n      this.data.push(...users);\r\n    }\r\n  }\r\n\r\n  private storeData() {\r\n    this.storage.set('users', this.data);\r\n  }\r\n\r\n  public getAll(): Readonly<Readonly<User>[]> {\r\n    return this.data;\r\n  }\r\n\r\n  public getById(id: number): User {\r\n    return { ...this.data.find(i => i.id === id) };\r\n  }\r\n\r\n  public update(entry: User): number {\r\n    console.log('UsersDataService -> update, entry = ', entry);\r\n    const id = this.data.findIndex(i => i.id === entry.id);\r\n    if (id >= 0) {\r\n      this.data[id] = entry;\r\n      this.storeData();\r\n      console.log('UsersDataService -> update, was updated');\r\n    }\r\n    return id;\r\n  }\r\n\r\n  public create(entry: User): number {\r\n    const currentId = Math.max(...this.data.map(i => i.id)) + 1;\r\n    this.data.push({ ...entry, id: currentId });\r\n    this.storeData();\r\n    return currentId;\r\n  }\r\n\r\n  public delete(entry: User): number {\r\n    const id = this.data.findIndex(i => i.id === entry.id);\r\n    if (id >= 0) {\r\n      this.data.splice(id, 1);\r\n      this.storeData();\r\n    }\r\n    return id;\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}