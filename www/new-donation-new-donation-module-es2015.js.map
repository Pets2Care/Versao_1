{"version":3,"sources":["./src/app/home/donate/new-donation/new-donation-routing.module.ts","./src/app/home/donate/new-donation/new-donation.page.html","./src/app/home/donate/new-donation/new-donation.page.ts","./src/app/home/donate/new-donation/new-donation.module.ts","./src/app/home/donate/new-donation/new-donation.page.scss"],"names":[],"mappings":"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","file":"new-donation-new-donation-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { NewDonationPage } from './new-donation.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: NewDonationPage,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class NewDonationPageRoutingModule {}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"home/tabs/donate\\\"></ion-back-button>\\r\\n    </ion-buttons>    \\r\\n    <ion-title>Nova Doação</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n<form (ngSubmit)=\\\"postForm()\\\">\\r\\n  <ion-col>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Nome:</ion-label>\\r\\n      <ion-input type=\\\"text\\\" name=\\\"name\\\"[(ngModel)]=\\\"newPet.name\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Idade (meses):</ion-label>\\r\\n      <ion-input type=\\\"number\\\" name=\\\"age\\\"[(ngModel)]=\\\"newPet.age\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Cidade:</ion-label>\\r\\n      <ion-input type=\\\"text\\\" name=\\\"place\\\"[(ngModel)]=\\\"newPet.place\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Espécie:</ion-label>\\r\\n      <ion-select name=\\\"type\\\" [(ngModel)]=\\\"newPet.type\\\">\\r\\n        <ion-select-option value=\\\"cat\\\">Gato</ion-select-option>\\r\\n        <ion-select-option value=\\\"dog\\\">Cachorro</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Descrição:</ion-label>        \\r\\n      <ion-textarea name=\\\"description\\\" [(ngModel)]=\\\"newPet.description\\\" rows=\\\"5\\\" placeholder=\\\"Descreva as principais características do animal\\\"></ion-textarea> \\r\\n   </ion-item>\\r\\n   <ion-item>\\r\\n    <ion-label position=\\\"stacked\\\">Foto do Animal:</ion-label>\\r\\n    <ion-input type=\\\"file\\\" name=\\\"images\\\" (change)=\\\"uploadFiles($event)\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  </ion-col>\\r\\n  <ion-button disabled={{isFormComplete()}} type=\\\"submit\\\" >Confirmar</ion-button>\\r\\n</form>\\r\\n</ion-content>\\r\\n\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\nimport { User } from '../../../interfaces/User';\r\nimport { PetsDataServiceNew } from '../../../services/PetsDataServiceNew';\r\nimport { UserDataService } from '../../../services/UserDataService';\r\n\r\nclass PetFormData {\r\n  name: string;\r\n  place: string;\r\n  images: FileList;\r\n  userId: number;\r\n  userName: string;\r\n  age: number;\r\n  type: string;\r\n  description: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-new-donation',\r\n  templateUrl: './new-donation.page.html',\r\n  styleUrls: ['./new-donation.page.scss'],\r\n})\r\nexport class NewDonationPage implements OnInit {\r\n  public newPet = new PetFormData();\r\n  private user: User;\r\n\r\n  constructor(\r\n    private alertController: AlertController,\r\n    private router: Router,\r\n    private petsDataService: PetsDataServiceNew,\r\n    private userDataService: UserDataService,\r\n  ) {\r\n    this.loadData();\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n\r\n  loadData(): void {\r\n    this.user = this.userDataService.get();\r\n  }\r\n\r\n  uploadFiles(event: any): void {\r\n    const files = (event.target as HTMLInputElement).files;\r\n    console.log('uploadFiles -> files = ', files);\r\n\r\n    this.newPet.images = files;\r\n  }\r\n\r\n  postForm(): void {\r\n    this.newPet.userId = this.user.id;\r\n    this.newPet.userName = this.user.name;\r\n\r\n    this.petsDataService.create(this.newPet).subscribe(() => {\r\n      this.newPet = new PetFormData();\r\n      this.presentAlertSuccess();\r\n    });\r\n  }\r\n\r\n  isFormComplete(): boolean {\r\n    return !(\r\n      this.newPet?.name?.length > 0 &&\r\n      this.newPet?.place?.length > 0 &&\r\n      this.newPet?.images &&\r\n      this.newPet?.age &&\r\n      this.newPet?.type?.length > 0 &&\r\n      this.newPet?.description?.length > 0\r\n    );\r\n  }\r\n\r\n  async presentAlertSuccess(): Promise<any> {\r\n    const alert = await this.alertController.create({\r\n      header: 'Doação criada com sucesso!',\r\n      buttons: [\r\n        {\r\n          text: 'Entendi',\r\n          handler: () => {\r\n            console.log('clicou, volta pra lista de doações');\r\n            this.router.navigate(['/home/tabs/donate/']);\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async presentAlertError(): Promise<any> {\r\n    const alert = await this.alertController.create({\r\n      header: 'Houve um erro na criação da doação',\r\n      message: 'Por favor tente novamente mais tarde',\r\n      buttons: [\r\n        {\r\n          text: 'Entendi',\r\n          handler: () => {\r\n            this.router.navigate(['/home/tabs/donate/']);\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { NewDonationPageRoutingModule } from './new-donation-routing.module';\r\nimport { NewDonationPage } from './new-donation.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    NewDonationPageRoutingModule,\r\n  ],\r\n  declarations: [NewDonationPage],\r\n})\r\nexport class NewDonationPageModule {}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvZG9uYXRlL25ldy1kb25hdGlvbi9uZXctZG9uYXRpb24ucGFnZS5zY3NzIn0= */\";"],"sourceRoot":"webpack:///"}