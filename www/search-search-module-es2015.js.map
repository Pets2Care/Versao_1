{"version":3,"sources":["./src/app/home/search/search.module.ts","./src/app/home/search/search.page.ts","./src/app/home/search/search.page.html","./src/app/home/search/search.page.scss","./src/app/home/search/search-routing.module.ts"],"names":[],"mappings":"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","file":"search-search-module-es2015.js","sourcesContent":["import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { PhotoCardComponent } from '../../components/photo-card/photo-card.component';\r\n\r\nimport { SearchPageRoutingModule } from './search-routing.module';\r\nimport { SearchPage } from './search.page';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, IonicModule, SearchPageRoutingModule],\r\n  declarations: [SearchPage, PhotoCardComponent],\r\n})\r\nexport class SearchPageModule {}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\nimport { Pet } from '../../interfaces/Pet';\r\nimport { PetsDataServiceNew } from '../../services/PetsDataServiceNew';\r\n\r\n@Component({\r\n  selector: 'app-search',\r\n  templateUrl: './search.page.html',\r\n  styleUrls: ['./search.page.scss'],\r\n})\r\nexport class SearchPage implements OnInit, OnDestroy {\r\n  private subject = new Subject();\r\n  public isLoading = false;\r\n  public petsData: Readonly<Pet[]>;\r\n  public filteredPetsData: Readonly<Pet[]>;\r\n  public selectedSegment = 'all';\r\n  public result: Readonly<Pet[]>;\r\n\r\n  constructor(private petsDataService: PetsDataServiceNew) {}\r\n\r\n  ngOnInit(): void {\r\n    this.petsDataService\r\n      .get()\r\n      .pipe(takeUntil(this.subject))\r\n      .subscribe(data => {\r\n        this.petsData = data;\r\n      });\r\n\r\n    this.applySegmentFilter(this.selectedSegment);\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.subject.next();\r\n    this.subject.complete();\r\n  }\r\n\r\n  //Preciso desse? Ele acaba dando um novo fetch toda vez que entra nessa tela\r\n  ionViewWillEnter(): void {\r\n    this.isLoading = true;\r\n    this.petsDataService.fetch().subscribe(() => {\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  applySegmentFilter(type: string): void {\r\n    console.log('applySegmentFilter -> type = ', type);\r\n\r\n    if (type === 'all') {\r\n      this.filteredPetsData = this.petsData;\r\n    } else {\r\n      this.filteredPetsData = this.petsData.filter(i => i.type === type);\r\n      console.log('filtrados = ', this.filteredPetsData);\r\n    }\r\n    this.result = this.filteredPetsData;\r\n  }\r\n\r\n  filterArray(ev: any): Readonly<Pet[]> {\r\n    console.log('filterArray -> ev.target.value = ', ev.target.value);\r\n    this.result = this.filteredPetsData;\r\n    const val = ev.target.value;\r\n    if (val && val.trim() !== '') {\r\n      this.result = this.result.filter(item => {\r\n        return (\r\n          item.name.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\r\n          item.place.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\r\n          item.userName.toLowerCase().indexOf(val.toLowerCase()) > -1 ||\r\n          item.description.toLowerCase().indexOf(val.toLowerCase()) > -1\r\n        );\r\n      });\r\n    } else {\r\n      return this.filteredPetsData;\r\n    }\r\n  }\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-segment [(ngModel)]=\\\"selectedSegment\\\" (ionChange)=\\\"applySegmentFilter($event.detail.value)\\\">\\r\\n      <ion-segment-button value=\\\"all\\\">\\r\\n        <ion-label>Todos</ion-label>\\r\\n      </ion-segment-button>\\r\\n      <ion-segment-button value=\\\"dog\\\">\\r\\n        <ion-label>Cachorros</ion-label>\\r\\n      </ion-segment-button>\\r\\n      <ion-segment-button value=\\\"cat\\\">\\r\\n        <ion-label>Gatos</ion-label>\\r\\n      </ion-segment-button>\\r\\n    </ion-segment>\\r\\n  </ion-toolbar>\\r\\n  <ion-toolbar>\\r\\n    <ion-searchbar (ionInput)=\\\"filterArray($event)\\\" placeholder=\\\"Buscar animal\\\"></ion-searchbar>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-text color=\\\"primary\\\">\\r\\n    <h1 class=\\\"ion-text-center\\\">\\r\\n      {{result.length}} Animais Encontrados\\r\\n    </h1>\\r\\n  </ion-text>\\r\\n      <app-photo-card [item]=\\\"i\\\" *ngFor=\\\"let i of result\\\"> </app-photo-card>\\r\\n</ion-content>\";","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvc2VhcmNoL3NlYXJjaC5wYWdlLnNjc3MifQ== */\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { SearchPage } from './search.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SearchPage,\r\n  },\r\n  {\r\n    path: 'detail-donation',\r\n    loadChildren: () =>\r\n      import('./detail-donation/detail-donation.module').then(\r\n        m => m.DetailDonationPageModule,\r\n      ),\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class SearchPageRoutingModule {}\r\n"],"sourceRoot":"webpack:///"}