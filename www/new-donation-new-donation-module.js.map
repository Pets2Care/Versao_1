{"version":3,"sources":["./src/app/home/donate/new-donation/new-donation-routing.module.ts","./src/app/home/donate/new-donation/new-donation.page.html","./src/app/home/donate/new-donation/new-donation.page.ts","./src/app/home/donate/new-donation/new-donation.module.ts","./src/app/home/donate/new-donation/new-donation.page.scss"],"names":[],"mappings":"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","file":"new-donation-new-donation-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NewDonationPage } from './new-donation.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NewDonationPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NewDonationPageRoutingModule {}\n","export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"home/tabs/donate\\\"></ion-back-button>\\r\\n    </ion-buttons>    \\r\\n    <ion-title>Nova Doação</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n<form (ngSubmit)=\\\"postForm()\\\">\\r\\n  <ion-col>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Nome:</ion-label>\\r\\n      <ion-input type=\\\"text\\\" name=\\\"name\\\"[(ngModel)]=\\\"newPet.name\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Idade (meses):</ion-label>\\r\\n      <ion-input type=\\\"number\\\" name=\\\"age\\\"[(ngModel)]=\\\"newPet.age\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Cidade:</ion-label>\\r\\n      <ion-input type=\\\"text\\\" name=\\\"place\\\"[(ngModel)]=\\\"newPet.place\\\"></ion-input>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Espécie:</ion-label>\\r\\n      <ion-select name=\\\"type\\\" [(ngModel)]=\\\"newPet.type\\\">\\r\\n        <ion-select-option value=\\\"cat\\\">Gato</ion-select-option>\\r\\n        <ion-select-option value=\\\"dog\\\">Cachorro</ion-select-option>\\r\\n      </ion-select>\\r\\n    </ion-item>\\r\\n    <ion-item>\\r\\n      <ion-label position=\\\"stacked\\\">Descrição:</ion-label>        \\r\\n      <ion-textarea name=\\\"description\\\" [(ngModel)]=\\\"newPet.description\\\" rows=\\\"5\\\" placeholder=\\\"Descreva as principais características do animal\\\"></ion-textarea> \\r\\n   </ion-item>\\r\\n   <ion-item>\\r\\n    <ion-label position=\\\"stacked\\\">Foto do Animal:</ion-label>\\r\\n    <ion-input type=\\\"file\\\" name=\\\"images\\\" (change)=\\\"uploadFiles($event)\\\"></ion-input>\\r\\n  </ion-item>\\r\\n  </ion-col>\\r\\n  <ion-button disabled={{isFormComplete()}} type=\\\"submit\\\" >Confirmar</ion-button>\\r\\n</form>\\r\\n</ion-content>\\r\\n\";","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\nimport { User } from '../../../interfaces/User';\r\nimport { PetsDataServiceNew } from '../../../services/PetsDataServiceNew';\r\nimport { UserDataService } from '../../../services/UserDataService';\r\n\r\nclass PetFormData {\r\n  name: string;\r\n  place: string;\r\n  images: FileList;\r\n  userId: number;\r\n  userName: string;\r\n  age: number;\r\n  type: string;\r\n  description: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-new-donation',\r\n  templateUrl: './new-donation.page.html',\r\n  styleUrls: ['./new-donation.page.scss'],\r\n})\r\nexport class NewDonationPage implements OnInit {\r\n  public newPet = new PetFormData();\r\n  private user: User;\r\n\r\n  constructor(\r\n    private alertController: AlertController,\r\n    private router: Router,\r\n    private petsDataService: PetsDataServiceNew,\r\n    private userDataService: UserDataService,\r\n  ) {\r\n    this.loadData();\r\n  }\r\n\r\n  ngOnInit(): void {}\r\n\r\n  loadData(): void {\r\n    this.user = this.userDataService.get();\r\n  }\r\n\r\n  uploadFiles(event: any): void {\r\n    const files = (event.target as HTMLInputElement).files;\r\n    console.log('uploadFiles -> files = ', files);\r\n\r\n    this.newPet.images = files;\r\n  }\r\n\r\n  postForm(): void {\r\n    this.newPet.userId = this.user.id;\r\n    this.newPet.userName = this.user.name;\r\n\r\n    this.petsDataService.create(this.newPet).subscribe(() => {\r\n      this.newPet = new PetFormData();\r\n      this.presentAlertSuccess();\r\n    });\r\n  }\r\n\r\n  isFormComplete(): boolean {\r\n    return !(\r\n      this.newPet?.name?.length > 0 &&\r\n      this.newPet?.place?.length > 0 &&\r\n      this.newPet?.images &&\r\n      this.newPet?.age &&\r\n      this.newPet?.type?.length > 0 &&\r\n      this.newPet?.description?.length > 0\r\n    );\r\n  }\r\n\r\n  async presentAlertSuccess(): Promise<any> {\r\n    const alert = await this.alertController.create({\r\n      header: 'Doação criada com sucesso!',\r\n      buttons: [\r\n        {\r\n          text: 'Entendi',\r\n          handler: () => {\r\n            console.log('clicou, volta pra lista de doações');\r\n            this.router.navigate(['/home/tabs/donate/']);\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n\r\n  async presentAlertError(): Promise<any> {\r\n    const alert = await this.alertController.create({\r\n      header: 'Houve um erro na criação da doação',\r\n      message: 'Por favor tente novamente mais tarde',\r\n      buttons: [\r\n        {\r\n          text: 'Entendi',\r\n          handler: () => {\r\n            this.router.navigate(['/home/tabs/donate/']);\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await alert.present();\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\n\nimport { NewDonationPageRoutingModule } from './new-donation-routing.module';\nimport { NewDonationPage } from './new-donation.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NewDonationPageRoutingModule,\n  ],\n  declarations: [NewDonationPage],\n})\nexport class NewDonationPageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvZG9uYXRlL25ldy1kb25hdGlvbi9uZXctZG9uYXRpb24ucGFnZS5zY3NzIn0= */\";"],"sourceRoot":"webpack:///"}